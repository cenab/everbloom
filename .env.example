# =============================================================================
# EVERBLOOM WEDDING PLATFORM - Environment Variables
# =============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env files to version control
# =============================================================================

# -----------------------------------------------------------------------------
# ENVIRONMENT
# -----------------------------------------------------------------------------
NODE_ENV=development
# Options: development, production, test

# -----------------------------------------------------------------------------
# SUPABASE (Required for Wedding Site)
# Get these from: https://app.supabase.com → Project Settings → API
# -----------------------------------------------------------------------------
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
# Service role key (server-side only, more permissions)
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# -----------------------------------------------------------------------------
# REDIS (Required for Platform API & Worker)
# Railway: Add Redis service, then use ${{Redis.REDIS_URL}} in Railway dashboard
# Local: Use redis://localhost:6379
# -----------------------------------------------------------------------------
# Connection URL format: redis://default:password@host:port
REDIS_URL=redis://localhost:6379

# In Railway, reference the Redis service variable:
# REDIS_URL=${{Redis.REDIS_URL}}

# -----------------------------------------------------------------------------
# STRIPE (Required for Billing)
# Get these from: https://dashboard.stripe.com/apikeys
# -----------------------------------------------------------------------------
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-signing-secret

# Stripe Price IDs (create these in Stripe Dashboard → Products)
STRIPE_PRICE_STARTER=price_starter_xxx
STRIPE_PRICE_PREMIUM=price_premium_xxx

# -----------------------------------------------------------------------------
# SENDGRID (Required for Email)
# Get API key from: https://app.sendgrid.com/settings/api_keys
# -----------------------------------------------------------------------------
SENDGRID_API_KEY=SG.your-sendgrid-api-key
SENDGRID_FROM_EMAIL=invites@yourdomain.com
SENDGRID_FROM_NAME=Everbloom Weddings

# Webhook verification (optional, for tracking opens/clicks)
SENDGRID_WEBHOOK_VERIFICATION_KEY=your-webhook-verification-key

# -----------------------------------------------------------------------------
# SERVICE URLS
# -----------------------------------------------------------------------------
# Platform API port
PORT=3001

# Platform UI URL (for Stripe redirects)
PLATFORM_URL=http://localhost:3000

# Platform API URL (for worker service)
PLATFORM_API_URL=http://localhost:3001/api

# Wedding Site URL (for email links)
WEDDING_SITE_URL=http://localhost:4321

# Public API URL (exposed to frontend via Vite)
PUBLIC_PLATFORM_API_URL=http://localhost:3001/api

# -----------------------------------------------------------------------------
# CUSTOM DOMAINS
# -----------------------------------------------------------------------------
# Your Netlify site domain (e.g., your-app.netlify.app)
NETLIFY_SITE_DOMAIN=wedding-bestie.netlify.app

# CNAME target guests should point their domains to
CUSTOM_DOMAIN_CNAME_TARGET=wedding-bestie.netlify.app

# Secret for generating domain verification tokens
DOMAIN_VERIFICATION_SECRET=change-this-to-a-random-string

# Default domain for wedding sites
DEFAULT_DOMAIN_URL=https://everbloom.wedding

# -----------------------------------------------------------------------------
# SECURITY
# -----------------------------------------------------------------------------
# Worker service authentication token
# Generate with: openssl rand -hex 32
WORKER_TOKEN=your-secure-worker-token-here

# Photo upload signing secret
# Generate with: openssl rand -hex 32
PHOTO_UPLOAD_SECRET=your-secure-photo-secret-here

# Photo storage directory (local development only)
PHOTO_UPLOAD_DIR=./uploads

# -----------------------------------------------------------------------------
# WORKER CONFIGURATION
# -----------------------------------------------------------------------------
# Number of concurrent email jobs to process
REMINDER_WORKER_CONCURRENCY=5
